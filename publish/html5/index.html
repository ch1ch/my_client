<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>河北聚友</title>
    <link rel="icon" type="image/GIF" href="res/favicon.ico"/>

    <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,target-densitydpi=device-dpi"/>

    <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- force webkit on 360 -->
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <!-- force edge on IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="msapplication-tap-highlight" content="no">

    <!-- force full screen on some browser -->
    <meta name="full-screen" content="yes"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>

    <!-- force screen orientation on some browser -->
    <!-- <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-orientation" content="portrait"> -->

    <meta name="browsermode" content="application">
    <meta name="x5-page-mode" content="app">

<style type="text/css">
html {
  -ms-touch-action: none;
}

body, canvas, div {
  margin: 0;
  padding: 0;
  outline: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -khtml-user-select: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

body {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  border: 0;
  margin: 0;

  cursor: default;
  color: #888;
  background-color: #333;

  text-align: center;
  font-family: Helvetica, Verdana, Arial, sans-serif;

  display: flex;
  flex-direction: column;
}

#Cocos2dGameContainer {
  position: absolute;
  margin: 0;
  overflow: hidden;
  left: 0px;
  top: 0px;

  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: center;
  -webkit-box-pack: center;
}

canvas {
  background-color: rgba(0, 0, 0, 0);
}
</style>
</head>
<body>
<!-- <script src="res/loading.js"></script> -->
<form id="form" action="http://trans.palmf.cn/sdk/api/v1.0/cli/order_h5/0" method="post">
    <input type="hidden" id="orderInfo" name="orderInfo" value="">
  </form>
<canvas id="gameCanvas" width="480" height="720"></canvas>
<script>
    (function () {
        var nav = window.navigator;
        var ua = nav.userAgent.toLowerCase();
        var uaResult = /android (\d+(?:\.\d+)+)/i.exec(ua) || /android (\d+(?:\.\d+)+)/i.exec(nav.platform);
        if (uaResult) {
            var browserCheck = ua.match(/(qzone|micromessenger|qq)(mobile)?(browser)?\/?([\d.]+)/i);
            if (browserCheck) {
                var browserVersion = parseFloat(browserCheck[4] || 0);
                if (browserVersion < 6.2) {
                    var gameCanvas = document.getElementById("gameCanvas");
                    var ctx = gameCanvas.getContext('2d');
                    ctx.fillStyle = '#000000';
                    ctx.fillRect(0, 0, 1, 1);
                }
            }
        }
    })();
  function setCookie(c_name,value,expiredays)
  {
    var exdate=new Date()
    exdate.setDate(exdate.getDate()+expiredays)
    document.cookie=c_name+ "=" +escape(value)+
    ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
  }

  function getCookie(c_name)
  {
  if (document.cookie.length>0)
    {
    c_start=document.cookie.indexOf(c_name + "=")
    if (c_start!=-1)
      { 
      c_start=c_start + c_name.length+1 
      c_end=document.cookie.indexOf(";",c_start)
      if (c_end==-1) c_end=document.cookie.length
      return unescape(document.cookie.substring(c_start,c_end))
      } 
    }
  return ""
  }

  setCookie('headimgurl','http://wx.qlogo.cn/mmopen/mia54phWuEaibj8eNcMVuBMBCwh6qfD6LbXFKiazNdK7GxssznMcx4F6atFO164rW2k2V1QE7BASuOWPibR17SicN7w/0');
  setCookie('nickname','传传');
  setCookie('openid','oIrAps3LRdZIvvEHLQfKAx67pZiI');
  var hosturl='localhost';

</script>

<script src="lib/jquery-1.11.3.min.js"></script>
<script src="lib/mtjsencrypt.min.js"></script>
<script type="text/javascript">

  (function(){
    var timestamp=new Date().getTime();
    $("#mchntOrderNo").val("ceshi"+timestamp);
  })

  function submitOrder(money,ordernum){
    var version='api_NoEncrypt';//传此值时，平台返回明文参数，否则返回密文参数
    var subject='房卡';
    var mchntOrderNo=ordernum;
    var amount=money;
    var appid='0000001047';
    var key='469519ad66a9964fe7cd0573a2d688f0';
    var body='购买房卡';
    var clientIp='192.168.1.1';
    var notifyUrl='http://www.legendream.cn/maj/';
    var returnUrl='http://www.legendream.cn/maj/';
    var signature='';
    var jsonStr='{';
    //请求参数都按照名称字符升序排列
    if(amount!=''&&$.trim(amount).length>0){
      jsonStr+='"amount":"'+amount+'",';
      signature+='amount='+amount+'&'
    }
    if(appid!=''&&$.trim(appid).length>0){
      jsonStr+='"appid":"'+appid+'",';
      signature+='appid='+appid+'&'
    }
    if(body!=''&&$.trim(body).length>0){
      jsonStr+='"body":"'+body+'",';
      signature+='body='+body+'&'
    }
    if(clientIp!=''&&$.trim(clientIp).length>0){
      jsonStr+='"clientIp":"'+clientIp+'",';
      signature+='clientIp='+clientIp+'&'
    }
    if(mchntOrderNo!=''&&$.trim(mchntOrderNo).length>0){
      jsonStr+='"mchntOrderNo":"'+mchntOrderNo+'",';
      signature+='mchntOrderNo='+mchntOrderNo+'&'
    }
    
    if(notifyUrl!=''&&$.trim(notifyUrl).length>0){
      jsonStr+='"notifyUrl":"'+notifyUrl+'",';
      signature+='notifyUrl='+notifyUrl+'&'
    }
    if(returnUrl!=''&&$.trim(returnUrl).length>0){
      jsonStr+='"returnUrl":"'+returnUrl+'",';
      signature+='returnUrl='+returnUrl+'&'
    }
    if(subject!=''&&$.trim(subject).length>0){
      jsonStr+='"subject":"'+subject+'",';
      signature+='subject='+subject+'&'
    }
    if(version!=''&&$.trim(version).length>0){
      jsonStr+='"version":"'+version+'",';
      signature+='version='+version+'&'
    }
    if(key!=''&&$.trim(key).length>0){
      signature+='key='+key
    }
    if(signature!=''&&$.trim(signature).length>0){
      jsonStr+='"signature":"'+signature+'",';
    }
    
    jsonStr=jsonStr.substring(0,jsonStr.length-1);
    jsonStr+='}';
    var result =mtEncryptAndMD5(jsonStr);
    $("#orderInfo").val(result);
    document.getElementById('form').submit();
  }
</script>
<!-- <script src="cocos2d-js-v3.13.js"></script> -->
<script cocos src="game.min.js"></script>
</body>
</html>
